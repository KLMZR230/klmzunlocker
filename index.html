<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KLMZ UNLOCKER - Pedidos Funcionales</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root {
      --dark-bg: #161a20;
      --header-bg: #11141a;
      --text-light: #ffffff;
      --text-muted: #aaaaaa;
      --accent-pink: #d9429c;
      --service-box-bg: #1c2025;
      --button-bg: #4a4a58;
      --whatsapp-green: #25d366;
      --card-border: #292d34;
      --card-inner-bg: #1a1e25;
      --green-check: #00ff00;
    }
    *, *:before, *:after {
      box-sizing: border-box;
    }
    body {
      background-color: var(--dark-bg);
      color: var(--text-light);
      font-size: 14px;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    a {
      color: var(--text-light);
      text-decoration: none;
      transition: color 0.2s;
    }
    a:hover {
      color: var(--accent-pink);
    }
    /* Top info bar */
    .top-info-bar {
      background-color: var(--header-bg);
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 8px 30px;
      font-size: 12px;
      border-bottom: 1px solid #292d34;
    }
    .top-info-bar .info-group a {
      margin-left: 20px;
      padding: 5px 10px;
      border-radius: 3px;
      background-color: var(--button-bg);
      color: var(--text-light);
      font-weight: bold;
    }
    .top-info-bar .info-group a:hover {
      background-color: var(--accent-pink);
    }
    /* Hero Section */
    .hero-section {
      min-height: 260px;
      width: 100%;
      background-color: var(--dark-bg);
      background-size: cover;
      background-position: center bottom;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      padding: 30px;
      margin-bottom: 6px;
      border-bottom: 2px solid var(--card-border);
      transition: background-image 0.5s;
    }
    .hero-title {
      font-size: 40px;
      font-weight: bold;
      color: var(--accent-pink);
      margin-bottom: 10px;
      text-shadow: 2px 2px 12px #222;
    }
    .hero-desc {
      font-size: 19px;
      color: var(--text-light);
      margin-bottom: 6px;
      font-weight: 500;
      text-shadow: 1px 3px 12px #292d34;
    }
    /* Main layout */
    .main-content {
      padding: 25px 12px;
      max-width: 850px;
      margin: auto;
    }
    /* Service boxes */
    .service-box {
      background-color: var(--service-box-bg);
      border: 1px solid var(--card-border);
      border-radius: 5px;
      padding: 14px 10px 30px 14px;
      margin-bottom: 18px;
      box-shadow: 2px 8px 28px #292d3408;
      position: relative;
    }
    .service-title {
      font-size: 23px;
      font-weight: 700;
      color: var(--accent-pink);
      margin-bottom: 10px;
    }
    /* Pedido List */
    .pedido-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 14px;
      background: var(--card-inner-bg);
    }
    .pedido-table th, .pedido-table td {
      padding: 8px 6px;
      border: 1px solid var(--card-border);
    }
    .pedido-table th {
      background: var(--service-box-bg);
      color: var(--accent-pink);
      font-weight: bold;
    }
    .pedido-table tr {
      background: var(--card-inner-bg);
    }
    .pedido-table tr:nth-child(even) {
      background: #22282e;
    }
    /* Simple button */
    .btn {
      background: var(--button-bg);
      color: var(--text-light);
      border: none;
      padding: 8px 24px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 8px;
      font-weight: bold;
      transition: background 0.3s;
    }
    .btn:hover {
      background: var(--accent-pink);
    }
    /* Footer */
    .footer {
      background: var(--header-bg);
      color: var(--text-muted);
      padding: 15px 8px;
      text-align: center;
      font-size: 13px;
      border-top: 1px solid var(--card-border);
      margin-top: 70px;
    }
    .green-check {
      color: var(--green-check);
      font-weight: bold;
      font-size: 16px;
    }
    /* Responsive */
    @media (max-width:760px) {
      .main-content { padding: 12px 4px; }
      .hero-section { padding: 17px 6px;}
      .service-box { padding: 7px 5px 18px 7px;}
      .hero-title { font-size: 22px; }
      .hero-desc { font-size: 14px;}
    }
  </style>
</head>
<body>
  <div class="top-info-bar">
    <div class="info-group">
      <a href="mailto:klmzr230@gmail.com">‚úâÔ∏è klmzr230@gmail.com</a>
      <a href="https://wa.me/50368957466" target="_blank">üìû Whatsapp: +503 68957466</a>
    </div>
  </div>

  <section class="hero-section" id="heroSection">
    <div class="hero-title">KLMZ UNLOCKER</div>
    <div class="hero-desc">Servicio profesional de desbloqueo de IMEI, iCloud y mucho m√°s.</div>
  </section>

  <div class="main-content">
    <div class="service-box">
      <div class="service-title">IMEI Service</div>
      <div id="serviceList">Cargando servicios...</div>
    </div>
    <div class="service-box">
      <div class="service-title">üìú Mi Historial de Pedidos</div>
      <div id="pedidoList">Cargando sus pedidos...</div>
    </div>
    <div class="service-box">
      <div class="service-title">IPHONE SERVICES</div>
      <ul>
        <li>IPHONE CARRIER UNLOCK</li>
        <li>IPHONE ICLOUD UNLOCK</li>
        <li>IPHONE ICLOUD BYPASS WITH SIM WORKING</li>
        <li>IPHONE MDM BYPASS SERVICE</li>
      </ul>
    </div>
  </div>

  <div class="footer">
    üìû +503 68957466 (Whatsapp) ‚úâÔ∏è <strong>klmzr230@gmail.com</strong>
  </div>

  <!-- Supabase integraci√≥n y carga de imagen de fondo -->
  <script>
    const SUPABASE_URL = "https://your-project.supabase.co";
    const SUPABASE_KEY = "your-supabase-key";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const BACKGROUNDBUCKETNAME = "background-images";
    const BACKGROUNDFILEPATH = "herobackground.jpg";

    async function getPublicUrl(bucketName, filePath, fallbackUrl) {
      if (!supabase) return fallbackUrl;
      const data = supabase.storage.from(bucketName).getPublicUrl(filePath);
      let url = data?.publicUrl;
      if (!url || url.includes("not-found")) return fallbackUrl;
      // Evita cach√© vieja
      const cacheBuster = Date.now();
      const separator = url.includes('?') ? '&' : '?';
      url = url + separator + "vcache=" + cacheBuster;
      return url || fallbackUrl;
    }

    async function loadImages() {
      const heroSection = document.getElementById("heroSection");
      const bgUrl = await getPublicUrl(BACKGROUNDBUCKETNAME, BACKGROUNDFILEPATH, null);
      if (bgUrl && heroSection) {
        heroSection.style.backgroundImage = `url('${bgUrl}')`;
        heroSection.style.backgroundColor = "transparent";
        heroSection.style.backgroundSize = "cover";
        heroSection.style.backgroundPosition = "center bottom";
      } else if (heroSection) {
        heroSection.style.backgroundImage = "none";
        heroSection.style.backgroundColor = "#161a20";
      }
    }

    document.addEventListener("DOMContentLoaded", async () => {
      await loadImages();
      // Aqu√≠ puedes agregar otros autoscripts si los tienes
    });
  </script>
</body>
</html>
